(window.webpackJsonpngbg=window.webpackJsonpngbg||[]).push([[0],{11:function(e,t,r){e.exports={root:"spriteEntry_root__21-Rc",hide:"spriteEntry_hide__1KLBL",index:"spriteEntry_index__3_j9A",focused:"spriteEntry_focused__2e2R9",spriteContainer:"spriteEntry_spriteContainer__3BESY",sprite:"spriteEntry_sprite__3D55Y"}},20:function(e,t,r){e.exports={root:"spriteTray_root__1Sixf",locked:"spriteTray_locked__Lvuwa",spriteEntries:"spriteTray_spriteEntries__16oai"}},22:function(e,t,r){e.exports={sprite:"sprite_sprite__38hI5",positioned:"sprite_positioned__16NC_"}},32:function(e,t,r){e.exports={root:"emulator_root__3kH7Z"}},33:function(e,t,r){e.exports={positioned:"tile_positioned__9EsHg"}},34:function(e,t,r){e.exports={root:"extractedTile_root__14wnu"}},35:function(e,t,r){e.exports={root:"extractedSprite_root__gpe6g"}},36:function(e,t,r){e.exports={root:"composeScreen_root__3bwon"}},39:function(e,t,r){e.exports=r(52)},51:function(e,t,r){},52:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(26),o=r.n(i),c=r(9),u=r(7),s=r(37),l=r(2),p=r(6),f=r(3),d=r(38);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var v=128,w=65536,y=66560,h=67584;function b(e,t,r){for(var n=window.Module._get_tile_ram_addr(),a=v*e,i=[],o=0;o<4*t;++o)i[o]=window.HEAPU8[n+a+o];for(var c=[],u=0;u<i.length;u+=4){var s=i[u]|i[u+1]<<8,l=i[u+2]|i[u+3]<<8,p=s|(l>>4&15)<<16,f=0;8&l?f=3:4&l&&(f=2);var d=l>>8&255,m=!!(1&l),w=!!(2&l);c.push({y:r[u/4],tileIndex:p,paletteIndex:d,horizontalFlip:m,verticalFlip:w,autoAnimation:f})}return c}function g(e){if(e<0)throw new Error("getYSpriteSizeSticky: sprite index under zero!");var t=window.Module._get_tile_ram_addr()+y+2*e,r=window.HEAPU8[t]|window.HEAPU8[t+1]<<8,n=!!(r>>6&1);if(n)return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},g(e-1),{sticky:n});for(var a=63&r,i=function(e,t,r){var n,a=512-e;if(a>272&&(a-=512),2===(n=32===r?1:r>=33?2:0)||1===n&&255===t)for(;a<0;)a+=t+1<<1;return a}(r>>7,E(e,{ignoreSticky:!0}).yScale,a),o=[],c=0;c<a;++c)o.push((i+16*c)%512);return{y:i,tileYs:o,spriteSize:a,sticky:n}}function O(e){if(e<0)throw new Error("getX: sprite index under zero!");var t;if(g(e).sticky){var r=E(e).xScale;t=O(e-1)+r}else{var n=window.Module._get_tile_ram_addr()+h+2*e;t=(window.HEAPU8[n]|window.HEAPU8[n+1]<<8)>>7}return t>=496&&(t-=512),t}function E(e,t){if(e<0)throw new Error("getScale: sprite index under zero!");if((!t||!t.ignoreSticky)&&g(e).sticky)return E(e-1);var r=window.Module._get_tile_ram_addr()+w+2*e,n=window.HEAPU8[r]|window.HEAPU8[r+1]<<8;return{yScale:255&n,xScale:1+(n>>8&15)}}function x(e,t){var r=g(e),n=r.sticky,a=r.y,i=r.tileYs,o=r.spriteSize;return{tiles:b(e,t?o:32,i),x:O(e),sticky:n,y:a,spriteSize:o}}var j=16,_=2*j;function I(e){var t=e>>15&1;return[((e>>8&15)<<2|(e>>14&1)<<1|t)/63*255,((e>>4&15)<<2|(e>>13&1)<<1|t)/63*255,((15&e)<<2|(e>>12&1)<<1|t)/63*255,255]}function S(e){var t=(window.Module._get_current_pal_addr()+e*_)/2;return Object(p.a)(window.Module.HEAPU16.slice(t,t+j))}function P(e){var t=e.map(I);return[[0,0,0,0]].concat(Object(p.a)(t.slice(1)))}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){var t=e.y,r=(e.paletteIndex,Object(d.a)(e,["y","paletteIndex"])),n=S(e.paletteIndex);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r,{composedY:t,neoGeoPalette:n,rgbPalette:P(n)})}function C(e,t,r){var n=function(e){for(var t=e,r=x(t,!0);r.sticky&&t>0;)r=x(t-=1,!0);var n=[];do{n.push(t),r=x(t+=1,!0)}while(r.sticky);return n}(e).map(function(e,r){var n=x(e,!0);return{spriteMemoryIndex:e,tiles:n.tiles.map(k),screenX:n.x,screenY:n.y,composedX:t+16*r,composedY:n.y}}),a={pauseId:r,sprites:n};return n.forEach(function(e){return e.group=a}),a}var M=r(31);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var z={hasStarted:!1,isPaused:!1,pauseId:0,extractedSpriteGroups:[]};function D(e,t){switch(t.type){case"StartEmulation":return A({},e,{hasStarted:!0});case"TogglePause":var r=!e.isPaused;return A({},e,{isPaused:r,pauseId:r?e.pauseId+1:e.pauseId});case"ExtractSprite":var n=t,a=n.spriteMemoryIndex,i=n.composedX,o=n.pauseId;if(o){var c=e.extractedSpriteGroups.find(function(e){return e.pauseId===o&&e.sprites.some(function(e){return e.spriteMemoryIndex===a})});if(!c)throw new Error("Something is wrong, ExtractSprite action failed to find a matching currentSpriteGroup");return function(e,t,r){var n=r-e.sprites[0].composedX;t.filter(function(t){return t.pauseId===e.pauseId}).forEach(function(e){e.sprites.forEach(function(e){e.composedX+=n})})}(c,e.extractedSpriteGroups,i),A({},e,{extractedSpriteGroups:e.extractedSpriteGroups})}var u=C(a,i,e.pauseId),s=e.extractedSpriteGroups.filter(function(e){return e.pauseId!==u.pauseId||!function(e,t){var r=e.sprites.map(function(e){return e.spriteMemoryIndex}).sort(),n=t.sprites.map(function(e){return e.spriteMemoryIndex}).sort();return Object(M.isEqual)(r,n)}(e,u)});return function(e,t){var r=t.find(function(t){return t.pauseId===e.pauseId});if(r){var n=r.sprites[0].composedX-r.sprites[0].screenX;e.sprites.forEach(function(e){return e.composedX=e.screenX+n})}}(u,s),A({},e,{extractedSpriteGroups:[].concat(Object(p.a)(s),[u])})}return function(e){throw new Error("Non exhaustive switch statement")}(t.type)}var N=Object(n.createContext)(z),T=Object(n.createContext)(function(){return 0}),U=function(e){var t=e.children,r=Object(n.useReducer)(D,z),i=Object(l.a)(r,2),o=i[0],c=i[1];return a.a.createElement(T.Provider,{value:c},a.a.createElement(N.Provider,{value:o},t))};function X(){return[Object(n.useContext)(N),Object(n.useContext)(T)]}var H={type:"TogglePause"},G={type:"StartEmulation"};var R=r(10),Y=r.n(R),L=r(19),K=r(5),Q=r.n(K),q=r(32),J=r.n(q);function W(e){return new Promise(function(t,r){var n=new FileReader;n.addEventListener("load",function(){n.result?t(n.result):r("Failed to load: ".concat(e.name))}),n.readAsArrayBuffer(e)})}function Z(e){return V.apply(this,arguments)}function V(){return(V=Object(L.a)(Y.a.mark(function e(t){var r;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:r=e.sent,window.Module.FS_createDataFile("/virtualfs",t.name,new Uint8Array(r),!0,!0);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $=function(e){var t=X(),r=Object(l.a)(t,2),i=r[0],o=r[1],c=Object(n.useState)(""),u=Object(l.a)(c,2),s=u[0],p=u[1];function f(){return(f=Object(L.a)(Y.a.mark(function e(t){var r;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target&&t.target.files&&t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Z(r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function d(){return(d=Object(L.a)(Y.a.mark(function e(t){var r;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target&&t.target.files&&t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Z(r);case 5:p(r.name.replace(".zip",""));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var m=Q()(J.a.root,e.className);return a.a.createElement("div",{className:m},a.a.createElement("canvas",{id:"canvas"}),a.a.createElement("div",null,"BIOS",a.a.createElement("input",{type:"file",onChange:function(e){return f.apply(this,arguments)}})),a.a.createElement("div",null,"ROM",a.a.createElement("input",{type:"file",onChange:function(e){return d.apply(this,arguments)}})),null,a.a.createElement("button",{onClick:function(){return function(e){var t=window.stackAlloc(12);window.HEAP32[t>>2]=window.allocateUTF8OnStack("gngeo"),window.HEAP32[1+(t>>2)]=window.allocateUTF8OnStack(e||s),window.HEAP32[2+(t>>2)]=0,o(G),window.Module._run_rom(2,t)}()}},"start emulation"),a.a.createElement("button",{disabled:!i.hasStarted,onClick:function(){i.isPaused?window.Module.resumeMainLoop():window.Module.pauseMainLoop(),o(H)}},i.isPaused?"resume":"pause"))},ee=r(14),te=r(15),re=r(17),ne=r(16),ae=r(18),ie=128,oe={0:3,1:2,2:1,3:0,4:7,5:6,6:5,7:4};function ce(e,t,r){for(var n=window.Module._get_rom_ctile_addr(),a=ie*t,i=[],o=0;o<ie;++o)i[o]=window.HEAPU8[n+a+o];e.width=16,e.height=16;for(var c=e.getContext("2d"),u=c.getImageData(0,0,16,16),s=0;s<16;++s)for(var l=0;l<8;++l)for(var p=i[8*s+oe[l]],f=15&p,d=r[p>>4&15],m=r[f],v=0;v<d.length;++v)u.data[4*(16*s+2*l)+v]=d[v],u.data[4*(16*s+2*l+1)+v]=m[v];c.putImageData(u,0,0)}var ue=r(33),se=r.n(ue),le=function(e){function t(){return Object(ee.a)(this,t),Object(re.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this.props,t=e.y,r=e.tileIndex,n=e.paletteIndex,i=e.horizontalFlip,o=e.verticalFlip,c=e.positioned;var u=o?-1:1,s={transform:"scale(".concat(i?-1:1,",").concat(u,")"),top:t},l=Q()(Object(f.a)({},se.a.positioned,c));return a.a.createElement("canvas",{className:l,ref:function(e){return e&&function(e){var t=P(S(n));ce(e,r,t)}(e)},style:s})}}]),t}(a.a.PureComponent),pe=r(22),fe=r.n(pe),de=function(e){var t=e.className,r=e.spriteIndex,n=e.positioned,i=e.overrideX,o=e.honorTileSize,c=Object(u.c)({item:{spriteIndex:r,type:"Sprite"}}),s=Object(l.a)(c,2),p=(s[0],s[1]),d=x(r,o);if(0===d.tiles.length)return null;var m=d.tiles.map(function(e,t){return a.a.createElement(le,{key:t,positioned:n,y:e.y-d.y,tileIndex:e.tileIndex,paletteIndex:e.paletteIndex,horizontalFlip:e.horizontalFlip,verticalFlip:e.verticalFlip})}),v={top:d.y,left:"number"===typeof i?i:d.x,gridTemplateRows:"repeat(".concat(d.tiles.length,", 16px)"),zIndex:r},w=Q()(fe.a.sprite,t,Object(f.a)({},fe.a.positioned,n));return a.a.createElement("div",{ref:p,className:w,style:v},m)},me=r(11),ve=r.n(me),we=function(e){var t,r=e.className,n=e.spriteIndex,i=e.render,o=e.hideIfEmpty,c=e.focused,u=e.honorTileSize,s=e.onClick,l=Q()(ve.a.root,r,(t={},Object(f.a)(t,ve.a.hide,i&&o&&function(e){return 0===g(e).spriteSize}(n)),Object(f.a)(t,ve.a.focused,c),t));return a.a.createElement("div",{className:l,onClick:s},a.a.createElement("div",{className:ve.a.index},n),a.a.createElement("div",{className:ve.a.spriteContainer},i&&a.a.createElement(de,{className:ve.a.sprite,spriteIndex:n,positioned:!1,honorTileSize:u})))},ye=r(20),he=r.n(ye);var be=function(e){var t=e.className,r=X(),i=Object(l.a)(r,1)[0],o=Object(n.useState)([]),c=Object(l.a)(o,2),u=c[0],s=c[1],p=Object(n.useState)(null),d=Object(l.a)(p,2),m=d[0],v=d[1],w=Q()(he.a.root,t,Object(f.a)({},he.a.locked,!i.isPaused));return a.a.createElement("div",{className:w},a.a.createElement("div",{key:i.pauseId,className:he.a.spriteEntries,style:{gridTemplateColumns:"repeat(".concat(381,", max-content)")}},new Array(381).fill(1,0,381).map(function(e,t){return a.a.createElement(we,{key:t,spriteIndex:t,render:i.isPaused,hideIfEmpty:!0,onClick:function(e){if(e.ctrlKey)s(u.concat(t)),v(null);else if(e.shiftKey)if(null!==m||1===u.length){var r=Math.min(m||u[0],t),n=Math.max(m||u[0],t);s(function(e,t){var r=t-e+1;return new Array(r).fill(0,0,r).map(function(t,r){return r+e})}(r,n))}else s([t]),v(t);else s([t]),v(null)},focused:u.indexOf(t)>-1,honorTileSize:!0})})))},ge=r(34),Oe=r.n(ge),Ee=function(e){function t(){return Object(ee.a)(this,t),Object(re.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this.props,t=e.y,r=e.tileIndex,n=e.rgbPalette,i=e.horizontalFlip;var o=e.verticalFlip?-1:1,c={transform:"scale(".concat(i?-1:1,",").concat(o,")"),top:t};return a.a.createElement("canvas",{className:Oe.a.root,ref:function(e){return e&&void ce(e,r,n)},style:c})}}]),t}(a.a.PureComponent),xe=r(35),je=r.n(xe),_e=function(e){var t=e.data,r=e.autoAnimate,n=e.animationCounter,i=Object(u.c)({item:{spriteIndex:t.spriteMemoryIndex,pauseId:t.group.pauseId,type:"Sprite"}}),o=Object(l.a)(i,2),c=(o[0],o[1]),s=t.tiles.map(function(e,i){var o=e.tileIndex;return r&&"number"===typeof n&&(3===e.autoAnimation&&(o=(-8&o)+(o+n&7)),2===e.autoAnimation&&(o=(-4&o)+(o+n&3))),a.a.createElement(Ee,{key:i,y:e.composedY-t.composedY,tileIndex:o,rgbPalette:e.rgbPalette,horizontalFlip:e.horizontalFlip,verticalFlip:e.verticalFlip})}),p={top:t.composedY,left:t.composedX,gridTemplateRows:"repeat(".concat(t.tiles.length,", 16px)"),zIndex:t.spriteMemoryIndex};return a.a.createElement("div",{ref:c,className:je.a.root,style:p},s)},Ie=r(36),Se=r.n(Ie),Pe=function(e){var t=e.className,r=Object(n.useState)({animation:0,rafFrameCountdown:0}),i=Object(l.a)(r,2),o=i[0],c=i[1],s=Object(n.useState)(!1),f=Object(l.a)(s,2),d=f[0],m=f[1],v=X(),w=Object(l.a)(v,2),y=w[0],h=w[1],b=Object(n.useState)(null),g=Object(l.a)(b,2),O=g[0],E=g[1];Object(n.useEffect)(function(){if(d){var e=window.Module._get_neogeo_frame_counter_speed()-1;requestAnimationFrame(function(){var t=0===o.rafFrameCountdown?1:0;c({animation:o.animation+t,rafFrameCountdown:1===t?e:o.rafFrameCountdown-1})})}});var x=Object(u.d)({accept:"Sprite",drop:function(e,t){if(O){var r=t.getClientOffset().x-O.getBoundingClientRect().left,n=16*Math.floor(r/16),a=e.spriteIndex,i=e.pauseId;h(function(e,t,r){return{type:"ExtractSprite",spriteMemoryIndex:e,composedX:t,pauseId:r}}(a,n,i))}}}),j=Object(l.a)(x,2),_=(j[0],j[1]),S=y.extractedSpriteGroups.reduce(function(e,t){return e.concat(t.sprites)},[]),P=S.map(function(e){return a.a.createElement(_e,{key:e.spriteMemoryIndex,data:e,autoAnimate:d,animationCounter:o.animation})}),B=y.isPaused?function(e){var t=I(e);return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}(function(){var e=window.Module._get_current_pal_addr();return e+=8190,e/=2,window.Module.HEAPU16[e]}()):"transparent",k=Math.max.apply(Math,[0].concat(Object(p.a)(S.map(function(e){return e.composedX})))),C={backgroundColor:B,width:Math.max(k+48,320)},M=Q()(Se.a.root,t);return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return m(!d)}},d?"stop":"preview"),a.a.createElement("div",null,o.animation," (",o.rafFrameCountdown,")"),a.a.createElement("div",{className:M,ref:function(e){E(e),_(e)},style:C},P))},Be=function(){var e,t,r,n,a,i,o,c,u,s,l,p,f={},d=-1,m=12,v=5003,w=m,y=1<<m,h=[],b=[],g=v,O=0,E=!1,x=0,j=0,_=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],I=[],S=f.LZWEncoder=function(a,i,o,c){e=a,t=i,r=o,n=Math.max(2,c)},P=function(e,t){I[p++]=e,p>=254&&M(t)},B=function(e){k(g),O=s+2,E=!0,z(s,e)},k=function(e){for(var t=0;t<e;++t)h[t]=-1},C=f.compress=function(e,t){var r,n,a,i,f,m,v;for(E=!1,c=F(o=u=e),l=(s=1<<e-1)+1,O=s+2,p=0,i=A(),v=0,r=g;r<65536;r*=2)++v;v=8-v,k(m=g),z(s,t);e:for(;(a=A())!=d;)if(r=(a<<w)+i,h[n=a<<v^i]!=r){if(h[n]>=0){f=m-n,0===n&&(f=1);do{if((n-=f)<0&&(n+=m),h[n]==r){i=b[n];continue e}}while(h[n]>=0)}z(i,t),i=a,O<y?(b[n]=O++,h[n]=r):B(t)}else i=b[n];z(i,t),z(l,t)},M=(f.encode=function(r){r.writeByte(n),a=e*t,i=0,C(n+1,r),r.writeByte(0)},function(e){p>0&&(e.writeByte(p),e.writeBytes(I,0,p),p=0)}),F=function(e){return(1<<e)-1},A=function(){return 0===a?d:(--a,255&r[i++])},z=function(e,t){for(x&=_[j],j>0?x|=e<<j:x=e,j+=o;j>=8;)P(255&x,t),x>>=8,j-=8;if((O>c||E)&&(E?(c=F(o=u),E=!1):c=++o==w?y:F(o)),e==l){for(;j>0;)P(255&x,t),x>>=8,j-=8;M(t)}};return S.apply(this,arguments),f},ke=function(){var e,t,r,n,a,i={},o=256,c=499,u=491,s=487,l=503,p=3*l,f=o-1,d=4,m=100,v=16,w=1<<v,y=10,h=10,b=w>>h,g=w<<y-h,O=o>>3,E=6,x=1<<E,j=O*x,_=30,I=10,S=1<<I,P=8,B=1<<P,k=I+P,C=1<<k,M=[],F=[],A=[],z=[],D=i.NeuQuant=function(e,i,c){var u,s;for(t=e,r=i,n=c,a=new Array(o),u=0;u<o;u++)a[u]=new Array(4),(s=a[u])[0]=s[1]=s[2]=(u<<d+8)/o,A[u]=w/o,F[u]=0},N=function(){for(var e=[],t=new Array(o),r=0;r<o;r++)t[a[r][3]]=r;for(var n=0,i=0;i<o;i++){var c=t[i];e[n++]=a[c][0],e[n++]=a[c][1],e[n++]=a[c][2]}return e},T=function(){var e,t,r,n,i,c,u,s;for(u=0,s=0,e=0;e<o;e++){for(r=e,n=(i=a[e])[1],t=e+1;t<o;t++)(c=a[t])[1]<n&&(r=t,n=c[1]);if(c=a[r],e!=r&&(t=c[0],c[0]=i[0],i[0]=t,t=c[1],c[1]=i[1],i[1]=t,t=c[2],c[2]=i[2],i[2]=t,t=c[3],c[3]=i[3],i[3]=t),n!=u){for(M[u]=s+e>>1,t=u+1;t<n;t++)M[t]=e;u=n,s=e}}for(M[u]=s+f>>1,t=u+1;t<256;t++)M[t]=f},U=function(){var a,i,o,f,v,w,y,h,b,g,O,x,I,P;for(r<p&&(n=1),e=30+(n-1)/3,x=t,I=0,P=r,g=(O=r/(3*n))/m|0,h=S,(y=(w=j)>>E)<=1&&(y=0),a=0;a<y;a++)z[a]=h*((y*y-a*a)*B/(y*y));for(b=r<p?3:r%c!==0?3*c:r%u!==0?3*u:r%s!==0?3*s:3*l,a=0;a<O;)if(o=(255&x[I+0])<<d,f=(255&x[I+1])<<d,v=(255&x[I+2])<<d,i=R(o,f,v),G(h,i,o,f,v),0!==y&&H(y,i,o,f,v),(I+=b)>=P&&(I-=r),0===g&&(g=1),++a%g===0)for(h-=h/e,(y=(w-=w/_)>>E)<=1&&(y=0),i=0;i<y;i++)z[i]=h*((y*y-i*i)*B/(y*y))},X=(i.map=function(e,t,r){var n,i,c,u,s,l,p;for(s=1e3,p=-1,i=(n=M[t])-1;n<o||i>=0;)n<o&&((c=(l=a[n])[1]-t)>=s?n=o:(n++,c<0&&(c=-c),(u=l[0]-e)<0&&(u=-u),(c+=u)<s&&((u=l[2]-r)<0&&(u=-u),(c+=u)<s&&(s=c,p=l[3])))),i>=0&&((c=t-(l=a[i])[1])>=s?i=-1:(i--,c<0&&(c=-c),(u=l[0]-e)<0&&(u=-u),(c+=u)<s&&((u=l[2]-r)<0&&(u=-u),(c+=u)<s&&(s=c,p=l[3]))));return p},i.process=function(){return U(),X(),T(),N()},function(){var e;for(e=0;e<o;e++)a[e][0]>>=d,a[e][1]>>=d,a[e][2]>>=d,a[e][3]=e}),H=function(e,t,r,n,i){var c,u,s,l,p,f,d;for((s=t-e)<-1&&(s=-1),(l=t+e)>o&&(l=o),c=t+1,u=t-1,f=1;c<l||u>s;){if(p=z[f++],c<l){d=a[c++];try{d[0]-=p*(d[0]-r)/C,d[1]-=p*(d[1]-n)/C,d[2]-=p*(d[2]-i)/C}catch(m){}}if(u>s){d=a[u--];try{d[0]-=p*(d[0]-r)/C,d[1]-=p*(d[1]-n)/C,d[2]-=p*(d[2]-i)/C}catch(m){}}}},G=function(e,t,r,n,i){var o=a[t];o[0]-=e*(o[0]-r)/S,o[1]-=e*(o[1]-n)/S,o[2]-=e*(o[2]-i)/S},R=function(e,t,r){var n,i,c,u,s,l,p,f,m,w;for(m=f=~(1<<31),p=l=-1,n=0;n<o;n++)(i=(w=a[n])[0]-e)<0&&(i=-i),(c=w[1]-t)<0&&(c=-c),i+=c,(c=w[2]-r)<0&&(c=-c),(i+=c)<f&&(f=i,l=n),(u=i-(F[n]>>v-d))<m&&(m=u,p=n),s=A[n]>>h,A[n]-=s,F[n]+=s<<y;return A[l]+=b,F[l]-=g,p};return D.apply(this,arguments),i},Ce=function(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function r(){this.bin=[]}r.prototype.getData=function(){for(var e="",r=this.bin.length,n=0;n<r;n++)e+=t[this.bin[n]];return e},r.prototype.writeByte=function(e){this.bin.push(e)},r.prototype.writeUTFBytes=function(e){for(var t=e.length,r=0;r<t;r++)this.writeByte(e.charCodeAt(r))},r.prototype.writeBytes=function(e,t,r){for(var n=r||e.length,a=t||0;a<n;a++)this.writeByte(e[a])};var n,a,i,o,c,u,s,l,p,f={},d=null,m=-1,v=0,w=!1,y=[],h=7,b=-1,g=!1,O=!0,E=!1,x=10,j="Generated by jsgif (https://github.com/antimatter15/jsgif/)",_=(f.setDelay=function(e){v=Math.round(e/10)},f.setDispose=function(e){e>=0&&(b=e)},f.setRepeat=function(e){e>=0&&(m=e)},f.setTransparent=function(e){d=e},f.setComment=function(e){j=e},f.addFrame=function(e,t){if(null===e||!w||null===o)throw new Error("Please call start method before calling addFrame");var r=!0;try{t?e instanceof ImageData?(c=e.data,E&&n==e.width&&a==e.height||I(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==n*a*4?c=e:(console.log("Please set the correct size: ImageData length mismatch"),r=!1):(console.log("Please provide correct input"),r=!1):(c=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,E||I(e.canvas.width,e.canvas.height)),B(),S(),O&&(F(),z(),m>=0&&A()),k(),""!==j&&C(),M(),O||z(),N(),O=!1}catch(i){r=!1}return r},f.download=function(e){if(null===o||0==g)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?e.endsWith(".gif")?e:e+".gif":"download.gif";var t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(o.bin)],{type:"image/gif"})),t.click()}},f.finish=function(){if(!w)return!1;var e=!0;w=!1;try{o.writeByte(59),g=!0}catch(t){e=!1}return e},function(){i=0,c=null,u=null,s=null,p=null,g=!1,O=!0}),I=(f.setFrameRate=function(e){15!=e&&(v=Math.round(100/e))},f.setQuality=function(e){e<1&&(e=1),x=e},f.setSize=function(e,t){w&&!O||((n=e)<1&&(n=320),(a=t)<1&&(a=240),E=!0)}),S=(f.start=function(){_();var e=!0;g=!1,o=new r;try{o.writeUTFBytes("GIF89a")}catch(t){e=!1}return w=e},f.cont=function(){_();return g=!1,o=new r,w=!0},function(){var e=u.length,t=e/3;s=[];var r=new ke(u,e,x);p=r.process();for(var n=0,a=0;a<t;a++){var o=r.map(255&u[n++],255&u[n++],255&u[n++]);y[o]=!0,s[a]=o}u=null,l=8,h=7,null!==d&&(i=P(d))}),P=function(e){if(null===p)return-1;for(var t=(16711680&e)>>16,r=(65280&e)>>8,n=255&e,a=0,i=16777216,o=p.length,c=0;c<o;){var u=t-(255&p[c++]),s=r-(255&p[c++]),l=n-(255&p[c]),f=u*u+s*s+l*l,d=c/3;y[d]&&f<i&&(i=f,a=d),c++}return a},B=function(){var e=n,t=a;u=[];for(var r=c,i=0,o=0;o<t;o++)for(var s=0;s<e;s++){var l=o*e*4+4*s;u[i++]=r[l],u[i++]=r[l+1],u[i++]=r[l+2]}},k=function(){var e,t;o.writeByte(33),o.writeByte(249),o.writeByte(4),null===d?(e=0,t=0):(e=1,t=2),b>=0&&(t=7&b),t<<=2,o.writeByte(0|t|e),D(v),o.writeByte(i),o.writeByte(0)},C=function(){o.writeByte(33),o.writeByte(254),o.writeByte(j.length),o.writeUTFBytes(j),o.writeByte(0)},M=function(){o.writeByte(44),D(0),D(0),D(n),D(a),O?o.writeByte(0):o.writeByte(128|h)},F=function(){D(n),D(a),o.writeByte(240|h),o.writeByte(0),o.writeByte(0)},A=function(){o.writeByte(33),o.writeByte(255),o.writeByte(11),o.writeUTFBytes("NETSCAPE2.0"),o.writeByte(3),o.writeByte(1),D(m),o.writeByte(0)},z=function(){o.writeBytes(p);for(var e=768-p.length,t=0;t<e;t++)o.writeByte(0)},D=function(e){o.writeByte(255&e),o.writeByte(e>>8&255)},N=function(){new Be(n,a,s,l).encode(o)};f.stream=function(){return o},f.setProperties=function(e,t){w=e,O=t};return f};function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=e.reduce(function(e,t){return e.concat(t.sprites)},[]),i=function(e){var t=Math.max.apply(Math,Object(p.a)(e.map(function(e){return e.composedX})))+16,r=e.reduce(function(e,t){return e.concat(t.tiles)},[]);return{width:t,height:Math.max.apply(Math,Object(p.a)(r.map(function(e){return e.composedY})))+16}}(a),o=document.createElement("canvas");o.width=r||i.width,o.height=n||i.height;var c=o.getContext("2d");return Object(p.a)(a).sort(function(e,t){return e.spriteMemoryIndex-t.spriteMemoryIndex}).forEach(function(e){e.tiles.forEach(function(r){var n=document.createElement("canvas"),a=r.tileIndex;3===r.autoAnimation&&(a=(-8&a)+(a+t&7)),2===r.autoAnimation&&(a=(-4&a)+(a+t&3)),ce(n,a,r.rgbPalette),(r.horizontalFlip||r.verticalFlip)&&(n=function(e,t){var r=t.horizontalFlip?-1:1,n=t.verticalFlip?-1:1,a=t.horizontalFlip?e.width:0,i=t.verticalFlip?e.height:0,o=document.createElement("canvas");o.width=e.width,o.height=e.height;var c=o.getContext("2d");return c&&(c.save(),c.translate(a,i),c.scale(r,n),c.drawImage(e,0,0),c.restore()),o}(n,r)),c.drawImage(n,e.composedX,r.composedY)})}),o}var Fe=8,Ae=0;var ze=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),r=t[0],i=t[1],o=X(),c=Object(l.a)(o,1)[0],u=Object(n.useState)("640"),s=Object(l.a)(u,2),p=s[0],f=s[1],d=Object(n.useState)("256"),m=Object(l.a)(d,2),v=m[0],w=m[1];return a.a.createElement("div",null,"width",a.a.createElement("input",{value:p,onChange:function(e){f(e.target.value||"")},type:"text"}),"height",a.a.createElement("input",{value:v,onChange:function(e){return w(e.target.value||"")},type:"text"}),a.a.createElement("button",{disabled:!p||!v,onClick:function(){if(p&&v){var e=16*window.Module._get_neogeo_frame_counter_speed(),t=function(e,t,r,n){var a=new Ce;a.setRepeat(Ae),a.setDelay(n),a.setQuality(1),a.start();for(var i=0;i<Fe;++i){var o=Me(e,i,t,r);a.addFrame(o.getContext("2d"))}a.finish();var c=a.stream().getData();return"data:image/gif;base64,".concat(btoa(c))}(c.extractedSpriteGroups,Number(p),Number(v),e);i(t)}}},"build gif"),r&&a.a.createElement("img",{src:r}))};r(51);o.a.render(a.a.createElement(function(){return a.a.createElement(U,null,a.a.createElement(u.b,{backend:s.a},a.a.createElement(c.e,null,a.a.createElement(c.d,{size:"50%"},a.a.createElement(c.b,{size:"30%"},a.a.createElement($,null)),a.a.createElement(c.a,null,a.a.createElement(Pe,null)),a.a.createElement(c.c,{size:"30%"},a.a.createElement(ze,null))),a.a.createElement(c.a,null,a.a.createElement(be,null)))))},null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f651abea.chunk.js.map